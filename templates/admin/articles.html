{% extends "admin/base.html" %}

{% block page_title %}Articles{% endblock %}

{% block content %}
<div class="admin-header-actions">
    <a href="{{ url_for('admin_articles_add') }}" class="btn btn-primary">
        <i class="fas fa-plus"></i>
        Add New Article
    </a>
</div>

{% if articles %}
<div class="admin-table-container">
    <table class="admin-table">
        <thead>
            <tr>
                <th>Title</th>
                <th>Categories</th>
                <th>Published Date</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for article in articles %}
            <tr>
                <td>
                    <strong>{{ article.title }}</strong>
                    {% if article.slug %}
                    <br><small style="color: var(--text-muted);">/blog/{{ article.slug }}</small>
                    {% endif %}
                </td>
                <td>
                    {% for category in article.categories[:2] %}
                    <span class="tech-tag-small">{{ category }}</span>
                    {% endfor %}
                    {% if article.categories|length > 2 %}
                    <span class="tech-tag-small">+{{ article.categories|length - 2 }}</span>
                    {% endif %}
                </td>
                <td>{{ article.published_date if article.published_date else 'Draft' }}</td>
                <td>
                    {% if article.published %}
                    <span class="badge badge-success">Published</span>
                    {% else %}
                    <span class="badge">Draft</span>
                    {% endif %}
                </td>
                <td class="actions-cell">
                    <a href="{{ url_for('blog_post', slug=article.slug) if article.slug else '#' }}" target="_blank" class="btn-icon" title="View">
                        <i class="fas fa-eye"></i>
                    </a>
                    <a href="{{ url_for('admin_articles_edit', item_id=article.id) }}" class="btn-icon" title="Edit">
                        <i class="fas fa-edit"></i>
                    </a>
                    <form method="POST" action="{{ url_for('admin_articles_delete', item_id=article.id) }}" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this article?');">
                        <button type="submit" class="btn-icon btn-danger" title="Delete">
                            <i class="fas fa-trash"></i>
                        </button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="empty-state">
    <i class="fas fa-newspaper"></i>
    <h3>No articles yet</h3>
    <p>Get started by adding your first article.</p>
    <a href="{{ url_for('admin_articles_add') }}" class="btn btn-primary">Add Article</a>
</div>
{% endif %}
{% endblock %}

