{% extends "admin/base.html" %}

{% block page_title %}Testimonials{% endblock %}

{% block content %}
<div class="admin-header-actions">
    <a href="{{ url_for('admin_testimonials_add') }}" class="btn btn-primary">
        <i class="fas fa-plus"></i>
        Add New Testimonial
    </a>
</div>

{% if testimonials %}
<div class="admin-table-container">
    <table class="admin-table">
        <thead>
            <tr>
                <th>Name</th>
                <th>Role & Company</th>
                <th>Rating</th>
                <th>Date</th>
                <th>Featured</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for testimonial in testimonials %}
            <tr>
                <td>
                    <strong>{{ testimonial.name }}</strong>
                    {% if testimonial.image_url %}
                    <br><small style="color: var(--text-muted);">Has image</small>
                    {% endif %}
                </td>
                <td>
                    {{ testimonial.role }}{% if testimonial.company %}, {{ testimonial.company }}{% endif %}
                </td>
                <td>
                    {% if testimonial.rating %}
                    <div class="testimonial-rating-small">
                        {% for i in range(testimonial.rating) %}
                        <i class="fas fa-star"></i>
                        {% endfor %}
                    </div>
                    {% else %}
                    <span class="text-muted">No rating</span>
                    {% endif %}
                </td>
                <td>{{ testimonial.date if testimonial.date else 'N/A' }}</td>
                <td>
                    {% if testimonial.featured %}
                    <span class="badge badge-success">Yes</span>
                    {% else %}
                    <span class="badge">No</span>
                    {% endif %}
                </td>
                <td class="actions-cell">
                    <a href="{{ url_for('admin_testimonials_edit', item_id=testimonial.id) }}" class="btn-icon" title="Edit">
                        <i class="fas fa-edit"></i>
                    </a>
                    <form method="POST" action="{{ url_for('admin_testimonials_delete', item_id=testimonial.id) }}" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this testimonial?');">
                        <button type="submit" class="btn-icon btn-danger" title="Delete">
                            <i class="fas fa-trash"></i>
                        </button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="empty-state">
    <i class="fas fa-quote-left"></i>
    <h3>No testimonials yet</h3>
    <p>Get started by adding your first testimonial.</p>
    <a href="{{ url_for('admin_testimonials_add') }}" class="btn btn-primary">Add Testimonial</a>
</div>
{% endif %}
{% endblock %}

